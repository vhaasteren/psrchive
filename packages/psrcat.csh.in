#!/bin/csh -ef

# @configure_input@

mkdir -p @prefix@/src
cd @prefix@/src

setenv URL http://www.atnf.csiro.au/research/pulsar/psrcat/downloads

rm -rf psrcat_pkg.tar.gz
@download@ ${URL}/psrcat_pkg.tar.gz

gunzip -c psrcat_pkg.tar.gz | tar xvf -
cd psrcat_tar

# -fcommon is required to compile psrcat with newer compilers
# see https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html
# thanks to Andrew Jameson for the tip!
@CC@ -fcommon -o psrcat *.c -lm

mkdir -p @prefix@/bin
mv psrcat @prefix@/bin

mkdir -p @prefix@/psrcat

mv psrcat.db @prefix@/psrcat

echo
echo
echo "PSRCAT installation completed"
echo
echo "To use psrcat, please set the environment variable"
echo
echo 'setenv PSRCAT_FILE @prefix@/psrcat/psrcat.db'
echo
echo
